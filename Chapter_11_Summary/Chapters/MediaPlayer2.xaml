<Window x:Class="Chapter_11_Summary.Chapters.MediaPlayer2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:helpers="clr-namespace:Chapter_11_Summary.Helpers"
		Title="MainWindow"
		Height="350"
		Width="525"
		Loaded="Window_Loaded"
		x:Name="mainWindow">
	
	<Window.Resources>
		<helpers:SecondsTimeSpanConverter x:Key="secondsTimeSpanConverter" />
		<helpers:TwoValuesPercentageConverter x:Key="twoValuesPercentageConverter" />
	</Window.Resources>

	<DockPanel>
		<StatusBar DockPanel.Dock="Bottom"
				   Width="{Binding ElementName=mainWindow, Path=Width}">
			<StatusBarItem HorizontalAlignment="Center">
				<Grid>
					<ProgressBar Width="300"
								 Height="15"
								 Value="{Binding ElementName=TimerSlider, Path=Value}"
								 Maximum="{Binding ElementName=TimerSlider, Path=Maximum}" />
					<TextBlock HorizontalAlignment="Center"
							   VerticalAlignment="Center">
						<TextBlock.Text>
							<MultiBinding Converter="{StaticResource twoValuesPercentageConverter}"
										  StringFormat="{}{0:p}">
								<Binding ElementName="TimerSlider"
										 Path="Value" />
								<Binding ElementName="TimerSlider"
										 Path="Maximum" />
							</MultiBinding>
						</TextBlock.Text>
					</TextBlock>
				</Grid>
			</StatusBarItem>
		</StatusBar>
		
		<WrapPanel DockPanel.Dock="Bottom"
				   HorizontalAlignment="Center">
			<Button Click="VideoClipPlayHandler"
					Content="Play" />
			<Button Click="VideoClipPauseHandler"
					Content="Pause"/>
			<Button Click="VideoClipStopHandler"
					Content="Stop" />
			<Label Content="Volume: " />
			<Slider Value="{Binding ElementName=videoClip, Path=Volume}"
					Maximum="1"
					Width="50" />
			<Label Content="Time: " />
			<Slider x:Name="TimerSlider"
					Width="135"
					ValueChanged="TimerSlider_ValueChanged"
					Thumb.DragStarted="TimerSlider_DragStarted"
					Thumb.DragCompleted="TimerSlider_DragCompleted" />
			<Label x:Name="timeOfWatchedVideo"
				   Content="{Binding ElementName=TimerSlider, Path=Value, Converter={StaticResource secondsTimeSpanConverter}}" />
			<Label x:Name="totalTimeOfVideo" />
		</WrapPanel>

		<MediaElement x:Name="videoClip"
					  Source="Data\1.czym-jest-css3.mp4"
					  Volume="0.01"
					  LoadedBehavior="Manual"
					  MediaFailed="VideoClip_MediaFailed"
					  MediaOpened="VideoClip_MediaOpened" />
	</DockPanel>
</Window>
